{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","apiServices/apiServices.js","App.js","index.js"],"names":["Searchbar","state","query","changeHandler","event","setState","currentTarget","value","submitHandler","preventDefault","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","item","url","urls","full","src","small","alt","description","ImageGallery","images","onClick","e","map","image","key","id","Button","Modal","modalRootRef","document","querySelector","keyDownHandler","code","toggleModal","clickHandler","target","nodeName","window","addEventListener","removeEventListener","clearUrl","createPortal","axios","defaults","baseURL","headers","common","page","get","then","response","data","results","App","searchQuery","isLoading","error","showModal","largeImageUrl","formSubmitHandler","fetchImages","apiServices","prevState","catch","finally","openLargeImage","attributes","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","buttonIsVisible","length","visible","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.000d0af6.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './Searchbar.scss';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  changeHandler = event => {\n    this.setState({ query: event.currentTarget.value });\n  };\n\n  submitHandler = event => {\n    event.preventDefault();\n\n    if (this.state.query) {\n      this.props.onSubmit(this.state.query);\n\n      this.setState({ query: '' });\n    }\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.submitHandler}>\n          <button className=\"SearchForm-button\" type=\"submit\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            value={this.state.query}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.changeHandler}\n          ></input>\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport './ImageGalleryItem.scss';\n\nconst ImageGalleryItem = ({ item }) => {\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        className=\"ImageGalleryItem-image\"\n        url={item.urls.full}\n        src={item.urls.small}\n        alt={item.description}\n      ></img>\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport './ImageGallery.scss';\n\nconst ImageGallery = ({ images, onClick }) => (\n  <ul className=\"ImageGallery\" onClick={e => onClick(e)}>\n    {images.map(image => (\n      <ImageGalleryItem key={image.id} item={image} />\n    ))}\n  </ul>\n);\n\nexport default ImageGallery;\n","import React from 'react';\nimport './Button.scss';\n\nconst Button = ({ onClick }) => (\n  <button className=\"Button\" type=\"button\" onClick={onClick}>\n    Load more\n  </button>\n);\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport './Modal.scss';\n\nclass Modal extends Component {\n  modalRootRef = document.querySelector('#modal-root');\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.keyDownHandler);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.keyDownHandler);\n    this.props.clearUrl();\n  }\n\n  keyDownHandler = ({ code }) => {\n    if (code === 'Escape') {\n      this.props.toggleModal();\n    }\n  };\n\n  clickHandler = ({ target }) => {\n    if (target.nodeName !== 'DIV') return;\n    this.props.toggleModal();\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.clickHandler}>\n        <img className=\"Modal\" src={this.props.url} alt=\"\" />\n      </div>,\n      this.modalRootRef,\n    );\n  }\n}\n\nexport default Modal;\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://api.unsplash.com/search/photos/';\naxios.defaults.headers.common['Authorization'] =\n  'Client-ID x9AhgqdVedkj92knzoynGC04XskWUCMDGAsuL6NaIdM';\n\nconst fetchImages = (query, page) => {\n  return axios\n    .get(`?query=${query}&per_page=12&page=${page}`)\n    .then(response => response.data.results);\n};\n\nexport default { fetchImages };\n","import React, { Component } from 'react';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Loader from 'react-loader-spinner';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\nimport apiServices from './apiServices';\n\nclass App extends Component {\n  state = {\n    images: [],\n    searchQuery: '',\n    page: 1,\n    isLoading: false,\n    error: null,\n    showModal: false,\n    largeImageUrl: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { images, searchQuery, largeImageUrl } = this.state;\n\n    if (prevState.searchQuery !== searchQuery) {\n      this.fetchImages();\n    }\n\n    if (images && prevState.images !== images) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n\n    if (prevState.largeImageUrl !== largeImageUrl && largeImageUrl) {\n      this.toggleModal();\n    }\n  }\n\n  formSubmitHandler = query => {\n    this.setState({ images: [], searchQuery: query, page: 1, error: null });\n  };\n\n  fetchImages = () => {\n    const { searchQuery, page } = this.state;\n\n    this.setState({ isLoading: true });\n\n    apiServices\n      .fetchImages(searchQuery, page)\n      .then(results =>\n        this.setState(prevState => ({\n          images: [...prevState.images, ...results],\n          page: prevState.page + 1,\n        })),\n      )\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  openLargeImage = ({ target }) => {\n    this.setState({ largeImageUrl: target.attributes.url.value });\n  };\n\n  clearUrl = () => {\n    this.setState({ largeImageUrl: '' });\n  };\n\n  toggleModal = () => {\n    this.setState(prevState => ({ showModal: !prevState.showModal }));\n  };\n\n  render() {\n    const { images, isLoading, error, showModal, largeImageUrl } = this.state;\n    const buttonIsVisible = images.length > 0 && !isLoading;\n\n    return (\n      <>\n        <Searchbar onSubmit={this.formSubmitHandler} />\n        {error && <h1>Что-то пошло не так. Попробуйте снова.</h1>}\n        <ImageGallery images={images} onClick={this.openLargeImage} />\n        <div className=\"LoaderWrapper\">\n          <Loader\n            visible={isLoading}\n            type=\"BallTriangle\"\n            color=\"#3f51b5\"\n            height={80}\n            width={80}\n          />\n        </div>\n\n        {buttonIsVisible && <Button onClick={this.fetchImages} />}\n        {showModal && (\n          <Modal\n            url={largeImageUrl}\n            toggleModal={this.toggleModal}\n            clearUrl={this.clearUrl}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\nimport './styles/styles.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}